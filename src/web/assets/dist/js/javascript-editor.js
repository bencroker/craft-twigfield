/*!
 * @project        twigfield
 * @name           javascript-editor.js
 * @author         Andrew Welch
 * @build          Sat Jun 11 2022 17:51:07 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[339],{5092:function(e,n,t){var o=t(713),i=t(8152),r=t(1002);t(4916),t(3123),t(5306),t(6699),t(2023),t(3157),t(4791),t(8309);function a(e){return e[e.length-1]}function l(e,n){monaco.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(t,o,i){var l=[],u=e,s=t.getValueInRange({startLineNumber:o.lineNumber,startColumn:0,endLineNumber:o.lineNumber,endColumn:o.column}),d=!0;if(0!==s.indexOf("{")&&(d=!1),-1!==s.substring(s.lastIndexOf("{")).indexOf("}")&&(d=!1),!d&&"TwigExpressionAutocomplete"===n)return null;if(d&&"TwigExpressionAutocomplete"===n){var c=s.replace("\t","").split(" "),m=c[c.length-1];if(m.includes("(")&&(m=a(m.split("("))),m.includes(">")&&(m=a(m.split(">"))),"."===m.charAt(m.length-1)){var g=m.substring(0,m.length-1).split(".");u=e[g[0]];for(var f=1;f<g.length;f++){if(!u.hasOwnProperty(g[f]))return l;u=u[g[f]]}}}if(void 0!==u)for(var p in u)if(u.hasOwnProperty(p)&&!p.startsWith("__")){var v=u[p].__completions;if(void 0!==v){if(delete v.range,"documentation"in v&&"object"!==(0,r.Z)(v.documentation)){var h=v.documentation;v.documentation={value:h,isTrusted:!0,supportsHtml:!0}}l.push(v)}}return{suggestions:l}}})}function u(e){monaco.languages.registerHoverProvider("twig",{provideHover:function(n,t){var o={},i=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:0,endLineNumber:t.lineNumber,endColumn:n.getLineMaxColumn(t.lineNumber)}),a=n.getWordAtPosition(t);if(null!==a){for(var l=i.substring(0,a.endColumn-1),u=!1,s=e,d=l.length;d>=0;d--)if(" "===l[d]){l=i.substring(d+1,l.length);break}if(l.includes(".")&&(u=!0),u)for(var c=l.substring(0,l.length).split("."),m=0;m<c.length-1;m++){if(!s.hasOwnProperty(c[m]))return o;s=s[c[m]]}if(void 0!==s&&void 0!==s[a.word]){var g=s[a.word].__completions;if(void 0!==g){var f=g.documentation;return"object"===(0,r.Z)(g.documentation)&&(f=g.documentation.value),{range:new monaco.Range(t.lineNumber,a.startColumn,t.lineNumber,a.endColum),contents:[{value:"**"+g.detail+"**"},{value:f}]}}}return o}}})}function s(e,n,t){var r=document.getElementById(e),a=document.createElement("div");a.id=e+"-monaco-editor",a.classList.add("p-2","box-content","monaco-editor-twigfield-icon","w-full","h-full"),""!==t&&a.classList.add(t),a.tabIndex=0,r.parentNode.insertBefore(a,r),r.style.display="none";var s=o.editor.create(a,{value:r.value,language:"twig",theme:"vs",automaticLayout:!0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:!1,wordWrap:!0,scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto"},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}});o.editor.setTheme("twigfield"),s.onDidChangeModelContent((function(e){r.value=s.getValue()})),Craft.cp.on("beforeSaveShortcut",(function(){r.value=s.getValue()})),function(e){var n="";null!=e&&(n="?fieldType="+e);var t=new XMLHttpRequest;t.open("GET",Craft.getActionUrl("twigfield/autocomplete/index"+n),!0),t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);void 0===window.monacoAutocompleteItems&&(window.monacoAutocompleteItems={});for(var n=0,o=Object.entries(e);n<o.length;n++){var r=(0,i.Z)(o[n],2),a=(r[0],r[1]);a.name in window.monacoAutocompleteItems||(window.monacoAutocompleteItems[a.name]=a.name,l(a.__completions,a.type),u(a.__completions))}}else console.log("Autocomplete endpoint failed with status "+t.status)},t.send()}(n);var d=function(){var e=s.getLayoutInfo().width,n=Math.min(1e3,s.getContentHeight());a.style.height="".concat(n,"px");try{!0,s.layout({width:e,height:n})}finally{!1}};s.onDidContentSizeChange(d),d()}""===t.p&&(t.p=window.twigfieldBaseAssetsUrl),window.makeMonacoEditor=s},9086:function(){}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[216,532],(function(){return n(5092),n(9086),n(1828)}));e.O()}]);
//# sourceMappingURL=javascript-editor.js.map