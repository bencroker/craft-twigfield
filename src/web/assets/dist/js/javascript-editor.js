/*!
 * @project        twigfield
 * @name           javascript-editor.js
 * @author         Andrew Welch
 * @build          Thu Jun 09 2022 19:55:27 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[339],{5092:function(e,n,t){var o=t(713),i=t(8152);t(4916),t(3123),t(5306),t(6699),t(2023),t(3157),t(4791),t(8309);function r(e){return e[e.length-1]}function a(e,n){monaco.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(t,o,i){var a=[],l=e,u=t.getValueInRange({startLineNumber:o.lineNumber,startColumn:0,endLineNumber:o.lineNumber,endColumn:o.column}),s=!0;if(0!==u.indexOf("{")&&(s=!1),-1!==u.substring(u.lastIndexOf("{")).indexOf("}")&&(s=!1),s&&"TwigExpressionAutocomplete"===n){var d=u.replace("\t","").split(" "),c=d[d.length-1];if(c.includes("(")&&(c=r(c.split("("))),c.includes(">")&&(c=r(c.split(">"))),"."===c.charAt(c.length-1)){var m=c.substring(0,c.length-1).split(".");l=e[m[0]];for(var g=1;g<m.length;g++){if(!l.hasOwnProperty(m[g]))return a;l=l[m[g]]}}}if(void 0!==l)for(var f in l)if(l.hasOwnProperty(f)&&!f.startsWith("__")){var p=l[f].__completions;void 0!==p&&(delete p.range,a.push(p))}return{suggestions:a}}})}function l(e){monaco.languages.registerHoverProvider("twig",{provideHover:function(n,t){var o={},i=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:0,endLineNumber:t.lineNumber,endColumn:n.getLineMaxColumn(t.lineNumber)}),r=n.getWordAtPosition(t);if(null!==r){for(var a=i.substring(0,r.endColumn-1),l=!1,u=e,s=a.length;s>=0;s--)if(" "===a[s]){a=i.substring(s+1,a.length);break}if(a.includes(".")&&(l=!0),l)for(var d=a.substring(0,a.length).split("."),c=0;c<d.length-1;c++){if(!u.hasOwnProperty(d[c]))return o;u=u[d[c]]}if(void 0!==u&&void 0!==u[r.word]){var m=u[r.word].__completions;if(void 0!==m)return{range:new monaco.Range(t.lineNumber,r.startColumn,t.lineNumber,r.endColum),contents:[{value:"**"+m.detail+"**"},{value:m.documentation}]}}return o}}})}function u(e,n){var t=document.getElementById(e),r=document.createElement("div");r.id=e+"-monaco-editor",r.classList.add("p-2","box-content","monaco-editor-background-frame","w-full","h-full"),r.tabIndex=0,t.parentNode.insertBefore(r,t),t.style.display="none";var u=o.editor.create(r,{value:t.value,language:"twig",automaticLayout:!0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:!1,wordWrap:!0,scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto"},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}});u.onDidChangeModelContent((function(e){t.value=u.getValue()})),Craft.cp.on("beforeSaveShortcut",(function(){t.value=u.getValue()})),function(e){var n="";null!=e&&(n="?fieldType="+e);var t=new XMLHttpRequest;t.open("GET",Craft.getActionUrl("twigfield/autocomplete/index"+n),!0),t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);void 0===window.monacoAutocompleteItems&&(window.monacoAutocompleteItems={});for(var n=0,o=Object.entries(e);n<o.length;n++){var r=(0,i.Z)(o[n],2),u=(r[0],r[1]);u.name in window.monacoAutocompleteItems||(window.monacoAutocompleteItems[u.name]=u.name,a(u.__completions,u.type),l(u.__completions))}}else console.log("Autocomplete endpoint failed with status "+t.status)},t.send()}(n);var s=function(){var e=u.getLayoutInfo().width,n=Math.min(1e3,u.getContentHeight());r.style.height="".concat(n,"px");try{!0,u.layout({width:e,height:n})}finally{!1}};u.onDidContentSizeChange(s),s()}""===t.p&&(t.p=window.twigfieldBaseAssetsUrl),window.makeMonacoEditor=u},9086:function(){}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[216,532],(function(){return n(5092),n(9086),n(1828)}));e.O()}]);
//# sourceMappingURL=javascript-editor.js.map