/*!
 * @project        twigfield
 * @name           javascript-editor.js
 * @author         Andrew Welch
 * @build          Sun Jun 05 2022 03:58:58 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[339],{5092:function(e,n,t){var o=t(713);t(4916),t(3123),t(5306),t(6699),t(2023),t(3157);function i(e){return e[e.length-1]}function r(e){var n="";null!=e&&(n="?additionalCompletionsCacheKey="+e);var t=new XMLHttpRequest;t.open("GET",Craft.getActionUrl("twigfield/autocomplete/index"+n),!0),t.onload=function(){if(t.status>=200&&t.status<400){var e=JSON.parse(t.responseText);!function(e){monaco.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(n,t,o){var r=[],a=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:0,endLineNumber:t.lineNumber,endColumn:t.column});if(0!==a.indexOf("{"))return null;if(-1!==a.substring(a.lastIndexOf("{")).indexOf("}"))return null;var l=a.replace("\t","").split(" "),u=l[l.length-1];u.includes("(")&&(u=i(u.split("("))),u.includes(">")&&(u=i(u.split(">")));var s="."===u.charAt(u.length-1),d=e;if(s){var c=u.substring(0,u.length-1).split(".");d=e[c[0]];for(var m=1;m<c.length;m++){if(!d.hasOwnProperty(c[m]))return r;d=d[c[m]]}}if(void 0!==d)for(var g in d)if(d.hasOwnProperty(g)&&!g.startsWith("__")){var f=d[g].__completions;void 0!==f&&(delete f.range,r.push(f))}return{suggestions:r}}})}(e),function(e){monaco.languages.registerHoverProvider("twig",{provideHover:function(n,t){var o={},i=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:0,endLineNumber:t.lineNumber,endColumn:n.getLineMaxColumn(t.lineNumber)}),r=n.getWordAtPosition(t);if(null!==r){for(var a=i.substring(0,r.endColumn-1),l=!1,u=e,s=a.length;s>=0;s--)if(" "===a[s]){a=i.substring(s+1,a.length);break}if(a.includes(".")&&(l=!0),l)for(var d=a.substring(0,a.length).split("."),c=0;c<d.length-1;c++){if(!u.hasOwnProperty(d[c]))return o;u=u[d[c]]}if(void 0!==u&&void 0!==u[r.word]){var m=u[r.word].__completions;if(void 0!==m)return{range:new monaco.Range(t.lineNumber,r.startColumn,t.lineNumber,r.endColum),contents:[{value:"**"+m.detail+"**"},{value:m.documentation}]}}return o}}})}(e)}else console.log("Autocomplete endpoint failed with status "+t.status)},t.send()}function a(e,n){var t=document.getElementById(e),i=document.createElement("div");i.id=e+"-monaco-editor",i.classList.add("p-2","box-content","monaco-editor-background-frame","w-full","h-full"),i.tabIndex=0,t.parentNode.insertBefore(i,t),t.style.display="none";var a=o.editor.create(i,{value:t.value,language:"twig",automaticLayout:!0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:!1,wordWrap:!0,scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto"},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}});document.querySelector("#main-form").addEventListener("submit",(function(e){t.value=a.getValue()})),Craft.cp.on("beforeSaveShortcut",(function(){t.value=a.getValue()})),void 0!==window.monacoAutocompleteItemsAdded&&(n=null),null!=n&&(r(n),window.monacoAutocompleteItemsAdded=!0);var l=function(){var e=a.getLayoutInfo().width,n=Math.min(1e3,a.getContentHeight());i.style.height="".concat(n,"px");try{!0,a.layout({width:e,height:n})}finally{!1}};a.onDidContentSizeChange(l),l()}""===t.p&&(t.p=window.seomaticBaseAssetsUrl),window.makeMonacoEditor=a},9086:function(){}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[216,532],(function(){return n(5092),n(9086),n(1828)}));e.O()}]);
//# sourceMappingURL=javascript-editor.js.map